{"name": "CHOOSE_COLOR", "example": "", "module": "class CHOOSE_COLOR():\n    step_name = 'CHOOSE_COLOR'\n\n    def __init__(self):\n        print(f'Registering {self.step_name} step')\n\n    def expand_box(self,box,img_size,factor=1.5):\n        W,H = img_size\n        x1,y1,x2,y2 = box\n        dw = int(factor*(x2-x1)/2)\n        dh = int(factor*(y2-y1)/2)\n        cx = int((x1 + x2) / 2)\n        cy = int((y1 + y2) / 2)\n        x1 = max(0,cx - dw)\n        x2 = min(cx + dw,W)\n        y1 = max(0,cy - dh)\n        y2 = min(cy + dh,H)\n        return [x1,y1,x2,y2]\n\n    def predict(self,img,boxes,color1,color2,question):\n        if len(boxes) > 0:\n            box = boxes[0]\n            box = self.expand_box(box,img.size)\n            out_img = img.crop(box)\n            colors = ['red','blue','green','yellow','orange','purple','pink','black','white','gray','brown','gold']\n            score1 = API.xvlm(out_img,color1,colors)\n            score2 = API.xvlm(out_img,color2,colors)\n            if score1 >= score2:\n                result = color1\n            else:\n                result = color2\n        else:\n            result = API.vqa(img,question)\n        return result\n\n    def execute(self,img,boxes,color1,color2,question):\n        result = self.predict(img,boxes,color1,color2,question)\n        return result", "program": "BOX0=LOC(image=IMAGE,object='carrot')\nIMAGE0=CROP_LEFTOF(image=IMAGE,box=BOX0)\nBOX1=LOC(image=IMAGE0,object='peppers')\nANSWER0=CHOOSE_COLOR(image=IMAGE0,box=BOX1,color1='red',color2='green',question=\"Are the peppers red or green?\")\nFINAL_RESULT=RESULT(var=ANSWER0)", "head": "class CHOOSE_COLOR():\n\t\"\"\"\n\tInput:\n        image: an image object\n        box: a list of bounding boxes\n        color1: a string\n        color2: a string\n        question: a string\n    Output:\n        result: a string\n\tExamples:\n        Question: Are the peppers that are to the left of the carrot red or green?\n        BOX0=LOC(image=IMAGE,object='carrot')\n        IMAGE0=CROP_LEFTOF(image=IMAGE,box=BOX0)\n        BOX1=LOC(image=IMAGE0,object='peppers')\n        ANSWER0=CHOOSE_COLOR(image=IMAGE0,box=BOX1,color1='red',color2='green',question=\"Are the peppers red or green?\")\n        FINAL_RESULT=RESULT(var=ANSWER0)\n\t\"\"\""}